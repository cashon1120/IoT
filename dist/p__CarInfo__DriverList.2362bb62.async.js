(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"0hUC":function(e,a,t){"use strict";var n=t("fbTi"),r=t("mZ4U");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=r(t("mK77"));t("pOT0");var l=r(t("/3qE")),d=r(t("43Yg")),o=r(t("/tCh")),u=r(t("scpF")),c=r(t("O/V9")),s=r(t("8aBX")),p=n(t("i9FB")),f=t("LneV"),m=r(t("hgAY")),h=t("LGMr"),g=function(e){function a(){var e;return(0,d.default)(this,a),e=(0,u.default)(this,(0,c.default)(a).apply(this,arguments)),e.state={confirmLoading:!1,voltageAlarmValue:0,voltageAutomaticPoweroffValue:0,cardFront:"",reverseSideCard:""},e.handleUploadChange=function(a,t){if(t.length>0){var n=t[0].response&&t[0].response.data;"cardFront"===a&&e.setState({cardFront:n}),"reverseSideCard"===a&&e.setState({reverseSideCard:n})}else"cardFront"===a&&e.setState({cardFront:""}),"reverseSideCard"===a&&e.setState({reverseSideCard:""})},e.handleSubmitModal=function(a){var t=e.props,n=t.onOk,r=t.dispatch,d=t.modalData.id;e.setState({confirmLoading:!0});var o=e.state,u=o.cardFront,c=o.reverseSideCard,s=function(t){e.setState({confirmLoading:!1}),1===t.code?n(a):l.default.error(t.msg)};r({type:d?"carInfo/updateDriver":"carInfo/addDriver",payload:(0,i.default)({id:d},a,{cardFront:u,reverseSideCard:c}),callback:s})},e}return(0,s.default)(a,e),(0,o.default)(a,[{key:"componentDidMount",value:function(){var e=this.props,a=e.professionData,t=e.nationalityData,n=e.dispatch;a.length<=0&&n({type:"global/fetchProfession",payload:{pageNum:1,pageSize:100}}),t.length<=0&&n({type:"global/fetchNationality",payload:{pageNum:1,pageSize:100}})}},{key:"componentWillReceiveProps",value:function(e){var a=e.modalData,t=a.cardFront,n=a.reverseSideCard;t&&this.setState({cardFront:t,reverseSideCard:n})}},{key:"modalFromColumns",value:function(){var e=this.state,a=e.cardFront,t=e.reverseSideCard,n=this.props,r=n.professionData,i=n.nationalityData,l=n.modalData,d=l.realName,o=l.sex,u=l.concatPhone,c=l.nationality,s=l.identificationNumber,p=l.industry,f=l.annualIncome,m=l.residentialAddress,g=l.remarks;return[{title:"\u7528\u6237\u59d3\u540d",dataIndex:"realName",componentType:"Input",initialValue:d,requiredMessage:"\u8bf7\u8f93\u5165\u7528\u6237\u59d3\u540d",required:!0,placeholder:"\u8bf7\u8f93\u5165\u8f66\u724c\u53f7"},{title:"\u6027\u522b",dataIndex:"sex",componentType:"Select",initialValue:o,requiredMessage:"\u8bf7\u9009\u62e9\u6027\u522b",required:!0,placeholder:"\u8bf7\u9009\u62e9\u6027\u522b",dataSource:h.SEX_TYPE},{title:"\u8054\u7cfb\u7535\u8bdd",dataIndex:"concatPhone",componentType:"Input",initialValue:u,requiredMessage:"\u8bf7\u8f93\u5165\u8054\u7cfb\u7535\u8bdd",required:!0,placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u7535\u8bdd"},{title:"\u540d\u65cf",dataIndex:"nationality",componentType:"Select",initialValue:c,requiredMessage:"\u8bf7\u9009\u62e9\u540d\u65cf",required:!0,placeholder:"\u8bf7\u9009\u62e9\u540d\u65cf",dataSource:i},{title:"\u8eab\u4efd\u8bc1\u53f7",dataIndex:"identificationNumber",componentType:"Input",initialValue:s,requiredMessage:"\u8bf7\u8f93\u5165\u8eab\u4efd\u8bc1\u53f7",required:!0,placeholder:"\u8bf7\u8f93\u5165\u8eab\u4efd\u8bc1\u53f7"},{title:"\u6240\u5c5e\u884c\u4e1a",dataIndex:"industry",componentType:"Select",initialValue:p,requiredMessage:"\u8bf7\u9009\u62e9\u6240\u5c5e\u884c\u4e1a",required:!0,placeholder:"\u8bf7\u9009\u62e9\u6240\u5c5e\u884c\u4e1a",dataSource:r},{title:"\u5e74\u6536\u5165",dataIndex:"annualIncome",componentType:"Select",initialValue:f,requiredMessage:"\u8bf7\u9009\u62e9\u5e74\u6536\u5165",required:!0,placeholder:"\u8bf7\u9009\u62e9\u5e74\u6536\u5165",dataSource:h.ANNUAL_INCOME},{title:"\u5c45\u4f4f\u5730\u5740",dataIndex:"residentialAddress",componentType:"Input",initialValue:m,requiredMessage:"\u8bf7\u8f93\u5165\u5c45\u4f4f\u5730\u5740",required:!0,placeholder:"\u8bf7\u8f93\u5165\u5c45\u4f4f\u5730\u5740"},{title:"\u8eab\u4efd\u8bc1\u6b63\u9762",dataIndex:"cardFront",componentType:"Upload",requiredMessage:"\u8bf7\u4e0a\u4f20\u8eab\u4efd\u8bc1\u6b63\u9762",handleChange:this.handleUploadChange,pictures:a},{title:"\u8eab\u4efd\u8bc1\u53cd\u9762",dataIndex:"reverseSideCard",componentType:"Upload",requiredMessage:"\u8bf7\u4e0a\u4f20\u8eab\u4efd\u8bc1\u53cd\u9762",handleChange:this.handleUploadChange,pictures:t},{title:"\u5907\u6ce8",dataIndex:"remark",componentType:"TextArea",initialValue:g,placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"}]}},{key:"render",value:function(){var e=this.state.confirmLoading,a=this.props,t=a.modalVisible,n=a.onCancel,r=a.modalData.id;return p.default.createElement(p.Fragment,null,p.default.createElement(m.default,{title:r?"\u4fee\u6539":"\u6dfb\u52a0",columns:this.modalFromColumns(),onOk:this.handleSubmitModal,visible:t,confirmLoading:e,width:1e3,onCancel:n}))}}]),a}(p.Component),y=(0,f.connect)(function(e){var a=e.global;return{professionData:a.professionData,nationalityData:a.nationalityData}})(g);a.default=y},RTdw:function(e,a,t){"use strict";var n=t("fbTi"),r=t("mZ4U");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("W3ek");var i=r(t("3N2t"));t("aMK7");var l=r(t("NgbC"));t("pOT0");var d=r(t("/3qE")),o=r(t("mK77")),u=r(t("43Yg")),c=r(t("/tCh")),s=r(t("scpF")),p=r(t("O/V9")),f=r(t("8aBX"));t("I1Ti");var m=r(t("r3a+")),h=n(t("i9FB")),g=t("LneV");t("1OjR");var y=r(t("4EI+")),v=t("eDcw"),I=r(t("cPMy")),S=r(t("CEDc")),D=r(t("0hUC")),k=m.default.confirm,C=function(e){function a(){var e;return(0,u.default)(this,a),e=(0,s.default)(this,(0,p.default)(a).apply(this,arguments)),e.state={loading:!1,modalVisible:!1,modalData:{},searchData:{},pageInfo:{pageSize:10,pageNum:1}},e.columns=[{title:"\u59d3\u540d",dataIndex:"realName",key:"realName"},{title:"\u6027\u522b",dataIndex:"sex",key:"sex",render:function(e){var a="";switch(e){case 1:a="\u7537";break;case 2:a="\u5973";break;default:a="\u4fdd\u5bc6";break}return h.default.createElement("span",null,a)}},{title:"\u8eab\u4efd\u8bc1\u53f7",dataIndex:"identificationNumber",key:"identificationNumber"},{title:"\u8f66\u8f86\u6570",dataIndex:"lowVoltageAlarmValue",key:"lowVoltageAlarmValue"},{title:"\u8054\u7cfb\u65b9\u5f0f",dataIndex:"concatPhone",key:"concatPhone"},{title:"\u540d\u65cf",dataIndex:"nationality",key:"nationality"},{title:"\u6240\u5c5e\u884c\u4e1a",dataIndex:"industry",key:"industry"},{title:"\u5e74\u6536\u5165",dataIndex:"annualIncome",key:"annualIncome"},{title:"\u5730\u5740",dataIndex:"residentialAddress",key:"residentialAddress"},{title:"\u6dfb\u52a0\u65f6\u95f4",dataIndex:"crtAt",key:"crtAt"},{title:"\u5907\u6ce8",dataIndex:"remarks",key:"remarks"},{title:"\u64cd\u4f5c",width:200,render:function(a){return h.default.createElement("div",{className:"table-operate"},h.default.createElement(y.default,{to:"/carInfo/driverDetail/".concat(a.id)},"\u67e5\u770b"),h.default.createElement("a",{onClick:function(){return e.handleEdit(a)}},"\u4fee\u6539"),h.default.createElement("a",{onClick:function(){return e.handleDel(a.id)}},"\u5220\u9664"))}}],e.handleSubmitModal=function(){e.handleTriggerModal(),e.initData()},e.handleTriggerModal=function(){var a=e.state.modalVisible;e.setState({modalVisible:!a})},e.handleAddNew=function(){e.setState({modalData:{}}),e.handleTriggerModal()},e.handleEdit=function(a){e.setState({modalData:(0,o.default)({},a)}),e.handleTriggerModal()},e.handleDel=function(a){var t=e.props.dispatch,n=function(a){1===a.code?(d.default.success("\u64cd\u4f5c\u6210\u529f"),e.initData()):d.default.error(a.msg)};k({title:"\u7cfb\u7edf\u63d0\u793a",content:"\u786e\u8ba4\u8981\u5220\u9664\u8be5\u8bb0\u5f55\u5417\uff1f",onOk:function(){t&&t({type:"carInfo/delVoltage",payload:{id:a},callback:n})}})},e.getSerarchColumns=function(){var e=[{title:"\u8f66\u4e3b\u59d3\u540d",dataIndex:"realName",componentType:"Input"},{title:"\u8054\u7cfb\u65b9\u5f0f",dataIndex:"concatPhone",componentType:"Input"},{title:"\u6240\u5c5e\u884c\u4e1a",dataIndex:"industry",componentType:"Input"}];return e},e.handleSearch=function(a){var t=e.state.searchData;e.setState({searchData:(0,o.default)({},t,a)},function(){e.initData()})},e.handleFormReset=function(){e.setState({searchData:{}},function(){e.initData()})},e}return(0,f.default)(a,e),(0,c.default)(a,[{key:"componentDidMount",value:function(){this.initData()}},{key:"initData",value:function(e){var a=this.props.dispatch,t=this.state,n=t.pageInfo,r=t.searchData,i={};for(var l in r)r[l]&&(i[l]=r[l]);e&&this.setState({pageInfo:{pageNum:e.pageNum,pageSize:e.pageSize}}),a&&a({type:"carInfo/fetchDriver",payload:(0,o.default)({},i,n,e)})}},{key:"handleDetail",value:function(e){}},{key:"render",value:function(){var e=this,a=this.props,t=a.data,n=a.loading,r=this.state,d=r.modalVisible,o=r.modalData;return h.default.createElement(v.PageHeaderWrapper,null,h.default.createElement(l.default,null,h.default.createElement("div",{className:"flex-container"},h.default.createElement("div",{className:"flex-1"},h.default.createElement(S.default,{columns:this.getSerarchColumns(),handleSearch:this.handleSearch,handleFormReset:this.handleFormReset})),h.default.createElement("div",null,h.default.createElement(i.default,{type:"primary",onClick:this.handleAddNew},"\u6dfb\u52a0\u8f66\u4e3b"))),h.default.createElement(I.default,{rowKey:"id",columns:this.columns,data:t||[],loading:n,onChangeCombine:function(a){return e.initData(a)}})),h.default.createElement(D.default,{modalVisible:d,modalData:o,onCancel:this.handleTriggerModal,onOk:this.handleSubmitModal}))}}]),a}(h.Component),b=(0,g.connect)(function(e){var a=e.carInfo,t=e.loading;return{data:a.driverData,loading:t.models.carInfo}})(C);a.default=b}}]);