(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{PYhq:function(e,a,t){"use strict";var l=t("fbTi"),n=t("mZ4U");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(t("mK77"));t("pOT0");var i=n(t("/3qE")),d=n(t("43Yg")),r=n(t("/tCh")),u=n(t("scpF")),c=n(t("O/V9")),s=n(t("8aBX")),f=l(t("i9FB")),m=t("LneV"),p=n(t("hgAY")),h=t("LGMr"),g=function(e){function a(){var e;return(0,d.default)(this,a),e=(0,u.default)(this,(0,c.default)(a).apply(this,arguments)),e.state={confirmLoading:!1,voltageAlarmValue:0,voltageAutomaticPoweroffValue:0},e.handleSubmitModal=function(a){var t=e.props,l=t.onOk,n=t.dispatch,d=t.modalData.id;e.setState({confirmLoading:!0});var r=function(t){e.setState({confirmLoading:!1}),1===t.code?(n({type:"global/fetchType",payload:{pageNum:1,pageSize:100}}),l(a)):i.default.error(t.msg)};delete a.batteryFactory,delete a.lowVoltageAlarmValue,delete a.automaticPoweroffValue,n({type:d?"carInfo/updateType":"carInfo/addType",payload:(0,o.default)({id:d},a),callback:r})},e.setVoltageValue=function(a){var t=e.props.voltageData;t.forEach(function(t){t.id===a&&e.setState({voltageAlarmValue:t.lowVoltageAlarmValue,voltageAutomaticPoweroffValue:t.automaticPoweroffValue})})},e}return(0,s.default)(a,e),(0,r.default)(a,[{key:"componentDidMount",value:function(){var e=this.props,a=e.voltageData,t=e.dispatch;a.length<=0&&t({type:"global/fetchVoltage",payload:{pageNum:1,pageSize:100}})}},{key:"modalFromColumns",value:function(){var e=this.props,a=e.voltageData,t=e.modalData,l=t.vehicleBrands,n=t.vehicleModel,o=t.batteryId,i=t.remark,d=this.state,r=d.voltageAlarmValue,u=d.voltageAutomaticPoweroffValue;return[{title:"\u8f66\u8f86\u54c1\u724c",dataIndex:"vehicleBrands",componentType:"Select",initialValue:l,requiredMessage:"\u8bf7\u9009\u62e9\u8f66\u8f86\u54c1\u724c",required:!0,placeholder:"\u8bf7\u9009\u62e9\u8f66\u8f86\u54c1\u724c",dataSource:h.CAR_BRAND},{title:"\u8f66\u8f86\u578b\u53f7",dataIndex:"vehicleModel",componentType:"Input",initialValue:n,requiredMessage:"\u8bf7\u8f93\u5165\u8f66\u8f86\u578b\u53f7",required:!0,placeholder:"\u8bf7\u8f93\u5165\u8f66\u8f86\u578b\u53f7"},{title:"\u7535\u74f6\u578b\u53f7",dataIndex:"batteryId",componentType:"Select",initialValue:o,requiredMessage:"\u8bf7\u8f93\u5165\u7535\u74f6\u578b\u53f7",required:!0,placeholder:"\u8bf7\u9009\u62e9\u7535\u74f6\u578b\u53f7",dataSource:a,handleChange:this.setVoltageValue},{title:"\u7535\u538b\u62a5\u8b66\u503c",dataIndex:"lowVoltageAlarmValue",componentType:"InputNumber",initialValue:r,requiredMessage:"\u8bf7\u9009\u62e9\u7535\u74f6\u578b\u53f7",required:!0,placeholder:"\u8bf7\u9009\u62e9\u7535\u74f6\u578b\u53f7",disabled:!0},{title:"\u7535\u538b\u81ea\u52a8\u65ad\u7535\u503c",dataIndex:"automaticPoweroffValue",componentType:"InputNumber",initialValue:u,requiredMessage:"\u8bf7\u9009\u62e9\u7535\u74f6\u578b\u53f7",required:!0,placeholder:"\u8bf7\u9009\u62e9\u7535\u74f6\u578b\u53f7",disabled:!0},{title:"\u5907\u6ce8",dataIndex:"remark",componentType:"TextArea",initialValue:i,placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"}]}},{key:"render",value:function(){var e=this.state.confirmLoading,a=this.props,t=a.modalVisible,l=a.onCancel,n=a.modalData.id;return f.default.createElement(f.Fragment,null,f.default.createElement(p.default,{title:n?"\u4fee\u6539\u8f66\u578b":"\u6dfb\u52a0\u8f66\u578b",columns:this.modalFromColumns(),onOk:this.handleSubmitModal,visible:t,confirmLoading:e,onCancel:l}))}}]),a}(f.Component),v=(0,m.connect)(function(e){var a=e.global;return{voltageData:a.voltageData}})(g);a.default=v},Yc94:function(e,a,t){"use strict";var l=t("fbTi"),n=t("mZ4U");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("W3ek");var o=n(t("3N2t"));t("aMK7");var i=n(t("NgbC"));t("pOT0");var d=n(t("/3qE")),r=n(t("mK77")),u=n(t("43Yg")),c=n(t("/tCh")),s=n(t("scpF")),f=n(t("O/V9")),m=n(t("8aBX"));t("I1Ti");var p=n(t("r3a+")),h=l(t("i9FB")),g=t("LneV");t("1OjR");var v=t("eDcw"),y=n(t("cPMy")),V=n(t("CEDc")),b=n(t("PYhq")),D=p.default.confirm,I=function(e){function a(){var e;return(0,u.default)(this,a),e=(0,s.default)(this,(0,f.default)(a).apply(this,arguments)),e.state={loading:!1,modalVisible:!1,modalData:{},searchData:{},pageInfo:{pageSize:10,pageNum:1}},e.columns=[{title:"\u8f66\u8f86\u54c1\u724c",dataIndex:"vehicleBrands",key:"vehicleBrands"},{title:"\u8f66\u8f86\u578b\u53f7",dataIndex:"vehicleModel",key:"vehicleModel"},{title:"\u7535\u74f6\u578b\u53f7",dataIndex:"batteryModel",key:"batteryModel"},{title:"\u7535\u538b\u62a5\u8b66\u503c",dataIndex:"voltageAlarmValue",key:"voltageAlarmValue"},{title:"\u7535\u538b\u65ad\u7535\u503c",dataIndex:"voltageCutoff",key:"voltageCutoff"},{title:"\u6dfb\u52a0\u65e5\u671f",dataIndex:"crtAt",key:"crtAt"},{title:"\u64cd\u4f5c",width:200,render:function(a){return h.default.createElement("div",{className:"table-operate"},h.default.createElement("a",{onClick:function(){return e.handleDel(a.id)}},"\u5220\u9664"))}}],e.handleSubmitModal=function(){e.handleTriggerModal(),e.initData()},e.handleTriggerModal=function(){var a=e.state.modalVisible;e.setState({modalVisible:!a})},e.handleAddNew=function(){e.setState({modalData:{}}),e.handleTriggerModal()},e.handleEdit=function(a){e.setState({modalData:(0,r.default)({},a)}),e.handleTriggerModal()},e.handleDel=function(a){var t=e.props.dispatch,l=function(a){1===a.code?(d.default.success("\u64cd\u4f5c\u6210\u529f"),e.initData()):d.default.error(a.msg)};D({title:"\u7cfb\u7edf\u63d0\u793a",content:"\u786e\u8ba4\u8981\u5220\u9664\u8be5\u8bb0\u5f55\u5417\uff1f",onOk:function(){t&&t({type:"carInfo/delType",payload:{id:a},callback:l})}})},e.getSerarchColumns=function(){var e=[{title:"\u8f66\u8f86\u54c1\u724c",dataIndex:"vehicleBrands",componentType:"Input"},{title:"\u8f66\u8f86\u578b\u53f7",dataIndex:"vehicleModel",componentType:"Input"}];return e},e.handleSearch=function(a){var t=e.state.searchData;e.setState({searchData:(0,r.default)({},t,a)},function(){e.initData()})},e.handleFormReset=function(){e.setState({searchData:{}},function(){e.initData()})},e}return(0,m.default)(a,e),(0,c.default)(a,[{key:"componentDidMount",value:function(){this.initData()}},{key:"initData",value:function(e){var a=this.props.dispatch,t=this.state,l=t.pageInfo,n=t.searchData,o={};for(var i in n)n[i]&&(o[i]=n[i]);e&&this.setState({pageInfo:{pageNum:e.pageNum,pageSize:e.pageSize}}),a&&a({type:"carInfo/fetchType",payload:(0,r.default)({},o,l,e)})}},{key:"render",value:function(){var e=this,a=this.props,t=a.data,l=a.loading,n=this.state,d=n.modalVisible,r=n.modalData;return h.default.createElement(v.PageHeaderWrapper,null,h.default.createElement(i.default,null,h.default.createElement("div",{className:"flex-container"},h.default.createElement("div",{className:"flex-1"},h.default.createElement(V.default,{columns:this.getSerarchColumns(),handleSearch:this.handleSearch,handleFormReset:this.handleFormReset})),h.default.createElement("div",null,h.default.createElement(o.default,{type:"primary",onClick:this.handleAddNew},"\u6dfb\u52a0\u8f66\u578b"))),h.default.createElement(y.default,{rowKey:"id",columns:this.columns,data:t||[],loading:l,onChangeCombine:function(a){return e.initData(a)}})),h.default.createElement(b.default,{modalVisible:d,modalData:r,onCancel:this.handleTriggerModal,onOk:this.handleSubmitModal}))}}]),a}(h.Component),M=(0,g.connect)(function(e){var a=e.carInfo,t=e.loading;return{data:a.typeData,loading:t.models.carInfo}})(I);a.default=M}}]);