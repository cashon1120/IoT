(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"+L/n":function(e,a,t){"use strict";var n=t("fbTi"),l=t("mZ4U");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=l(t("mK77"));t("pOT0");var d=l(t("/3qE")),r=l(t("43Yg")),o=l(t("/tCh")),u=l(t("scpF")),s=l(t("O/V9")),c=l(t("8aBX")),m=n(t("i9FB")),p=t("LneV"),f=l(t("hgAY")),h=t("LGMr"),g=function(e){function a(){var e;return(0,r.default)(this,a),e=(0,u.default)(this,(0,s.default)(a).apply(this,arguments)),e.state={confirmLoading:!1,voltageAlarmValue:0,voltageAutomaticPoweroffValue:0},e.handleSubmitModal=function(a){var t=e.props,n=t.onOk,l=t.dispatch,r=t.modalData.id;e.setState({confirmLoading:!0});var o=function(t){e.setState({confirmLoading:!1}),1===t.code?n(a):d.default.error(t.msg)};l({type:r?"system/updateUser":"system/addUser",payload:(0,i.default)({id:r},a),callback:o})},e}return(0,c.default)(a,e),(0,o.default)(a,[{key:"componentDidMount",value:function(){var e=this.props,a=e.roleData,t=e.partmentData,n=e.nationalityData,l=e.dispatch;a.length<=0&&l({type:"global/fetchRole",payload:{pageNum:1,pageSize:100}}),t.length<=0&&l({type:"global/fetchPartment",payload:{pageNum:1,pageSize:100}}),n.length<=0&&l({type:"global/fetchNationality",payload:{pageNum:1,pageSize:100}})}},{key:"modalFromColumns",value:function(){var e=this.props,a=(e.nationalityData,e.roleData),t=e.partmentData,n=e.modalData,l=n.userName,i=(n.notiality,n.sex),d=n.phoneNo,r=n.roleId,o=n.departId;return[{title:"\u7528\u6237\u59d3\u540d",dataIndex:"userName",componentType:"Input",initialValue:l,requiredMessage:"\u8bf7\u8f93\u5165\u7528\u6237\u59d3\u540d",required:!0,placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u59d3\u540d"},{title:"\u6027\u522b",dataIndex:"sex",componentType:"Select",initialValue:i,requiredMessage:"\u8bf7\u9009\u62e9\u6027\u522b",required:!0,placeholder:"\u8bf7\u9009\u62e9\u6027\u522b",dataSource:h.SEX_TYPE},{title:"\u8054\u7cfb\u7535\u8bdd",dataIndex:"phoneNo",componentType:"Input",initialValue:d,requiredMessage:"\u8bf7\u8f93\u5165\u8054\u7cfb\u7535\u8bdd",required:!0,placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u7535\u8bdd"},{title:"\u6240\u5728\u90e8\u95e8",dataIndex:"departId",selectName:"departName",componentType:"Select",initialValue:o,requiredMessage:"\u8bf7\u9009\u62e9\u90e8\u95e8",required:!0,placeholder:"\u8bf7\u9009\u62e9\u90e8\u95e8",dataSource:t},{title:"\u89d2\u8272",dataIndex:"roleId",selectName:"roleName",componentType:"Select",initialValue:r,requiredMessage:"\u8bf7\u9009\u62e9\u89d2\u8272",required:!0,placeholder:"\u8bf7\u9009\u62e9\u89d2\u8272",dataSource:a}]}},{key:"render",value:function(){var e=this.state.confirmLoading,a=this.props,t=a.modalVisible,n=a.onCancel,l=a.modalData.id;return m.default.createElement(m.Fragment,null,m.default.createElement(f.default,{title:l?"\u4fee\u6539\u7528\u6237":"\u6dfb\u52a0\u7528\u6237",columns:this.modalFromColumns(),onOk:this.handleSubmitModal,visible:t,confirmLoading:e,onCancel:n}))}}]),a}(m.Component),y=(0,p.connect)(function(e){var a=e.global;return{roleData:a.roleData,nationalityData:a.nationalityData,partmentData:a.partmentData}})(g);a.default=y},"9SPd":function(e,a,t){"use strict";var n=t("fbTi"),l=t("mZ4U");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("W3ek");var i=l(t("3N2t"));t("aMK7");var d=l(t("NgbC"));t("pOT0");var r=l(t("/3qE")),o=l(t("mK77")),u=l(t("43Yg")),s=l(t("/tCh")),c=l(t("scpF")),m=l(t("O/V9")),p=l(t("8aBX"));t("I1Ti");var f=l(t("r3a+")),h=n(t("i9FB")),g=t("LneV");t("1OjR");var y=t("eDcw"),b=l(t("cPMy")),v=l(t("hgAY")),D=l(t("CEDc")),S=l(t("+L/n")),M=t("c+yx"),N=f.default.confirm,k=function(e){function a(){var e;return(0,u.default)(this,a),e=(0,c.default)(this,(0,m.default)(a).apply(this,arguments)),e.state={loading:!1,modalVisible:!1,editId:"",disableModalVisible:!1,modalData:{},searchData:{},pageInfo:{pageSize:10,pageNum:1}},e.columns=[{title:"\u59d3\u540d",dataIndex:"userName",key:"userName"},{title:"\u6027\u522b",dataIndex:"sex",key:"sex",render:function(e){return h.default.createElement("span",null,(0,M.formatSex)(e))}},{title:"\u8054\u7cfb\u65b9\u5f0f",dataIndex:"phoneNo",key:"phoneNo"},{title:"\u6240\u5728\u90e8\u95e8",dataIndex:"departName",key:"departName"},{title:"\u89d2\u8272",dataIndex:"realName",key:"realName"},{title:"\u72b6\u6001",dataIndex:"status",key:"status",render:function(e){var a="";switch(e){case 1:a="\u6b63\u5e38";break;case 2:a="\u7981\u7528";break;default:a="\u6ce8\u9500";break}return a}},{title:"\u6dfb\u52a0\u65f6\u95f4",dataIndex:"createTime",key:"createTime"},{title:"\u64cd\u4f5c",width:250,render:function(a){return h.default.createElement("div",{className:"table-operate"},h.default.createElement("a",{onClick:function(){return e.handleEdit(a)}},"\u4fee\u6539"),h.default.createElement("a",{onClick:function(){return e.handleDisable(a.id)}},"\u8bbe\u7f6e\u72b6\u6001"),h.default.createElement("a",{onClick:function(){return e.handleResetPwd(a.id)}},"\u91cd\u7f6e\u5bc6\u7801"))}}],e.handleSubmitModal=function(){e.handleTriggerModal(),e.initData()},e.modalFromColumns=function(){return[{title:"\u72b6\u6001",dataIndex:"state",componentType:"Select",requiredMessage:"\u8bf7\u9009\u62e9\u7981\u7528\u72b6\u6001",required:!0,dataSource:[{name:"\u6b63\u5e38",value:1},{name:"\u7981\u7528",value:2},{name:"\u6ce8\u9500",value:3}],placeholder:"\u8bf7\u9009\u62e9\u7981\u7528\u72b6\u6001"}]},e.handleTriggerModal=function(){var a=e.state.modalVisible;e.setState({modalVisible:!a})},e.handleAddNew=function(){e.setState({modalData:{}}),e.handleTriggerModal()},e.handleEdit=function(a){e.setState({modalData:(0,o.default)({},a)}),e.handleTriggerModal()},e.handleResetPwd=function(a){var t=e.props.dispatch,n=function(e){1===e.code?r.default.success(e.msg):r.default.error(e.msg)};N({title:"\u7cfb\u7edf\u63d0\u793a",content:"\u786e\u8ba4\u8981\u91cd\u7f6e\u8be5\u7528\u6237\u5bc6\u7801\u5417\uff1f",onOk:function(){t&&t({type:"system/resetUserPwd",payload:{id:a},callback:n})}})},e.handleDisable=function(a){e.setState({editId:a}),e.handleTriggerDisableModal()},e.getSerarchColumns=function(){var e=[{title:"\u7528\u6237\u540d\u79f0",dataIndex:"realName",componentType:"Input"},{title:"\u624b\u673a\u53f7",dataIndex:"phoneNo",componentType:"Input"}];return e},e.handleSearch=function(a){var t=e.state.searchData;e.setState({searchData:(0,o.default)({},t,a)},function(){e.initData()})},e.handleFormReset=function(){e.setState({searchData:{}},function(){e.initData()})},e.handleTriggerDisableModal=function(){var a=e.state.disableModalVisible;e.setState({disableModalVisible:!a})},e.handleSubmitDisableModal=function(a){var t=e.props.dispatch,n=e.state.editId;e.setState({loading:!0});var l=function(a){1===a.code?r.default.success("\u64cd\u4f5c\u6210\u529f"):r.default.error(a.data),e.handleTriggerDisableModal(),e.initData(),e.setState({loading:!1})},i={id:n,status:a.state};t&&t({type:"system/disableUser",payload:i,callback:l})},e}return(0,p.default)(a,e),(0,s.default)(a,[{key:"componentDidMount",value:function(){this.initData()}},{key:"initData",value:function(e){var a=this.props.dispatch,t=this.state,n=t.pageInfo,l=t.searchData,i={};for(var d in l)l[d]&&(i[d]=l[d]);e&&this.setState({pageInfo:{pageNum:e.pageNum,pageSize:e.pageSize}}),a&&a({type:"system/fetchUser",payload:(0,o.default)({},i,n,e)})}},{key:"render",value:function(){var e=this,a=this.props,t=a.data,n=a.loading,l=this.state,r=l.modalVisible,o=l.modalData,u=l.disableModalVisible;return h.default.createElement(y.PageHeaderWrapper,null,h.default.createElement(d.default,null,h.default.createElement("div",{className:"flex-container"},h.default.createElement("div",{className:"flex-1"},h.default.createElement(D.default,{columns:this.getSerarchColumns(),handleSearch:this.handleSearch,handleFormReset:this.handleFormReset})),h.default.createElement("div",null,h.default.createElement(i.default,{type:"primary",onClick:this.handleAddNew},"\u6dfb\u52a0\u7528\u6237"))),h.default.createElement(b.default,{rowKey:"id",columns:this.columns,data:t||[],loading:n,onChangeCombine:function(a){return e.initData(a)}})),h.default.createElement(S.default,{modalVisible:r,modalData:o,onCancel:this.handleTriggerModal,onOk:this.handleSubmitModal}),h.default.createElement(v.default,{title:"\u590d\u5ba1",columns:this.modalFromColumns(),onOk:this.handleSubmitDisableModal,visible:u,confirmLoading:n,onCancel:this.handleTriggerDisableModal}))}}]),a}(h.Component),I=(0,g.connect)(function(e){var a=e.system,t=e.loading;return{data:a.userData,loading:t.models.system}})(k);a.default=I}}]);