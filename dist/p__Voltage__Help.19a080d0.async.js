(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{y03i:function(e,t,a){"use strict";var n=a("fbTi"),l=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("I1Ti");var i=l(a("r3a+"));a("aMK7");var o=l(a("NgbC")),r=l(a("mK77"));a("pOT0");var c=l(a("/3qE")),d=l(a("43Yg")),s=l(a("/tCh")),u=l(a("scpF")),m=l(a("O/V9")),p=l(a("8aBX"));a("RNnK");var f=l(a("Rt+G")),h=n(a("i9FB")),v=a("LneV"),g=a("eDcw"),y=l(a("cPMy")),N=l(a("CEDc")),k=f.default.TextArea,x=function(e){function t(){var e;return(0,d.default)(this,t),e=(0,u.default)(this,(0,m.default)(t).apply(this,arguments)),e.state={loading:!1,modalVisible:!1,searchData:{},editData:{id:0,vehicleName:"",exceptionCode:0,exceptionTime:"",concatName:"",concatPhone:"",lat:"",lng:"",plate:"",personnelName:""},processings:[],pageInfo:{pageSize:10,pageNum:1},remark:""},e.columns=[{title:"\u6c7d\u8f66\u54c1\u724c",key:"vehicleName",dataIndex:"vehicleName"},{title:"\u8f66\u724c\u53f7",key:"plate",dataIndex:"plate"},{title:"\u8f66\u4e3b\u59d3\u540d",dataIndex:"concatName",key:"concatName"},{title:"\u8054\u7cfb\u65b9\u5f0f",dataIndex:"concatPhone",key:"concatPhone"},{title:"\u8bbe\u5907\u5931\u8054\u65f6\u95f4",dataIndex:"exceptionTime",key:"exceptionTime"},{title:"\u7535\u74f6\u65ad\u7535\u65b9\u5f0f",dataIndex:"powerOffMode",key:"powerOffMode"},{title:"\u6551\u63f4\u65f6\u95f4",dataIndex:"rescueTime",key:"rescueTime"},{title:"\u8bbe\u5907\u6062\u590d\u65f6\u95f4",dataIndex:"recoveryTime",key:"recoveryTime"},{title:"\u6551\u63f4\u4eba\u5458",dataIndex:"personnelName",key:"personnelName"},{title:"\u64cd\u4f5c",width:100,render:function(t){return h.default.createElement("div",{className:"table-operate"},h.default.createElement("a",{onClick:function(){return e.handleSetState(t)}},1===t.state?"\u67e5\u770b":"\u6c47\u62a5"))}}],e.handleSetState=function(t){var a=e.state.modalVisible;e.setState({modalVisible:!a,editData:t})},e.handleOk=function(t){var a=e.props.dispatch,n=e.state,l=n.editData,i=n.remark;if(""!==i){var o=function(t){1===t.code?(e.initData(),e.setState({modalVisible:!1})):c.default.error(t.msg)};a&&a({type:"voltage/complete",payload:{id:l.id,processingRemark:i},callback:o})}else c.default.error("\u8bf7\u8f93\u5165\u6c47\u62a5\u5185\u5bb9")},e.handleCancel=function(t){e.setState({modalVisible:!1})},e.TextAreaChange=function(t){e.setState({remark:t.target.value})},e.getSerarchColumns=function(){var e=[{title:"\u8f66\u724c\u53f7",dataIndex:"plate",componentType:"Input"},{title:"\u8f66\u4e3b\u59d3\u540d",dataIndex:"ownerName",componentType:"Input"},{title:"\u8f66\u4e3b\u8054\u7cfb\u65b9\u5f0f",dataIndex:"concatPhone",componentType:"Input"},{title:"\u8f66\u8f7d\u8bbe\u5907",dataIndex:"personnelName",componentType:"Input"}];return e},e.handleSearch=function(t){var a=e.state.searchData;e.setState({searchData:(0,r.default)({},a,t)},function(){e.initData()})},e.handleFormReset=function(){e.setState({searchData:{}},function(){e.initData()})},e}return(0,p.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.initData()}},{key:"initData",value:function(e){var t=this.props.dispatch,a=this.state,n=a.pageInfo,l=a.searchData,i={};for(var o in l)l[o]&&(i[o]=l[o]);e&&this.setState({pageInfo:{pageNum:e.pageNum,pageSize:e.pageSize}}),t&&t({type:"voltage/fetchRescueRecord",payload:(0,r.default)({},i,n,e)})}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.loading,l=this.state,r=l.modalVisible,c=l.editData;return h.default.createElement(g.PageHeaderWrapper,null,h.default.createElement(o.default,null,h.default.createElement("div",{className:"flex-container"},h.default.createElement("div",{className:"flex-1"},h.default.createElement(N.default,{columns:this.getSerarchColumns(),handleSearch:this.handleSearch,handleFormReset:this.handleFormReset}))),h.default.createElement(y.default,{rowKey:"id",columns:this.columns,data:a||[],loading:n,onChangeCombine:function(t){return e.initData(t)}})),h.default.createElement(i.default,{title:"\u6551\u63f4\u8be6\u60c5",visible:r,confirmLoading:n,onOk:this.handleOk,onCancel:this.handleCancel},h.default.createElement("h3",null,c.plate),c.vehicleName,h.default.createElement("ul",{className:"vlotageDetail"},h.default.createElement("li",null,h.default.createElement("span",{className:"lable"},"\u6551\u63f4\u4eba\u5458:"),c.personnelName),h.default.createElement("li",null,h.default.createElement("span",{className:"lable"},"\u7ed3\u679c\u6c47\u62a5:"),h.default.createElement("div",{className:"selectWrapper"},h.default.createElement(k,{onChange:function(t){return e.TextAreaChange(t)}}))))))}}]),t}(h.Component),D=(0,v.connect)(function(e){var t=e.voltage,a=e.loading,n=e.global;return{data:t.rescueData,loading:a.models.voltage,userData:n.userData}})(x);t.default=D}}]);